<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StudyAid - File Upload</title>
<style>
body { font-family: Arial, sans-serif; margin: 0; padding: 0; background:#f9f9f9; }
.container { max-width: 600px; margin: 30px auto; background: #fff; padding: 20px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
h2 { text-align:center; color:#333; }
label { display:block; margin-top:15px; font-weight:bold; }
input, select { width:100%; padding:10px; margin-top:5px; border-radius:5px; border:1px solid #ccc; }
button { margin-top:20px; padding:12px; width:100%; background:#4CAF50; color:#fff; border:none; border-radius:5px; font-size:16px; cursor:pointer; }
button:hover { background:#45a049; }
.order-preview { margin-top:25px; padding:15px; border:1px solid #ccc; border-radius:5px; background:#f1f1f1; }
.bank-details { display:none; margin-top:20px; padding:15px; border:1px solid #2196F3; border-radius:5px; background:#e3f2fd; }
</style>
</head>
<body>
<div class="container">
<h2>Upload Your File</h2>
<form id="orderForm">
  <label for="service">Service</label>
  <select id="service" required>
    <option value="">Select Service</option>
    <option value="Assignment & Homework Help">Assignment & Homework Help</option>
    <option value="Exam Questions Explanation">Exam Questions Explanation</option>
  </select>

  <label for="urgency">Delivery Speed</label>
  <select id="urgency" required>
    <option value="Normal">Normal</option>
    <option value="Urgent">Urgent</option>
  </select>

  <label for="name">Full Name</label>
  <input type="text" id="name" placeholder="John Doe" required>

  <label for="email">Email Address</label>
  <input type="email" id="email" value="obaromichael47@gmail.com" required>

  <label for="whatsapp">WhatsApp Number</label>
  <input type="text" id="whatsapp" placeholder="08012345678" required>

  <label for="file">Upload File</label>
  <input type="file" id="file" required>

  <button type="button" onclick="generateOrder()">Preview Order</button>
</form>

<div class="order-preview" id="orderPreview" style="display:none;">
<h3>Order Summary</h3>
<p id="previewText"></p>
<button onclick="showBankDetails()">Proceed to Payment</button>
</div>

<div class="bank-details" id="bankDetails">
<h3>Bank Payment Details</h3>
<p>Bank Name: OPay<br>
Account Name: Michael Obaro<br>
Account Number: 6142529254<br>
Reference: <span id="orderIDBank"></span><br>
Amount: ₦<span id="orderTotalBank"></span></p>
<button onclick="redirectWhatsApp()">I’ve Paid</button>
</div>
</div>

<script>
let orderCounter = 0;

function generateOrder() {
  const service = document.getElementById('service').value;
  const urgency = document.getElementById('urgency').value;
  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const whatsapp = document.getElementById('whatsapp').value;
  const file = document.getElementById('file').files[0];

  if (!service || !urgency || !name || !email || !whatsapp || !file) {
    alert('Please fill all required fields and upload a file!');
    return;
  }

  orderCounter++;
  const now = new Date();
  const timestamp = now.getFullYear().toString() + 
                    (now.getMonth()+1).toString().padStart(2,'0') + 
                    now.getDate().toString().padStart(2,'0') + 
                    now.getHours().toString().padStart(2,'0') + 
                    now.getMinutes().toString().padStart(2,'0');
  const orderID = `STUDY_${timestamp}_${orderCounter}`;

  // Price logic
  let basePrice = 3000; // default price
  let urgentFee = urgency === "Urgent" ? 1500 : 0;
  let total = basePrice + urgentFee;

  const previewText = `
Order ID: ${orderID}
Service: ${service}
Delivery: ${urgency}
Base Price: ₦${basePrice}
Urgent Fee: ₦${urgentFee}
Total: ₦${total}
Name: ${name}
Email: ${email}
WhatsApp: ${whatsapp}
File: ${file.name}
  `;

  document.getElementById('orderPreview').style.display = 'block';
  document.getElementById('previewText').innerText = previewText;

  document.getElementById('orderIDBank').innerText = orderID;
  document.getElementById('orderTotalBank').innerText = total;

  window.currentOrder = {orderID, service, urgency, total, name, email, whatsapp, fileName: file.name};
}

function showBankDetails() {
  document.getElementById('bankDetails').style.display = 'block';
  document.getElementById('bankDetails').scrollIntoView({behavior: "smooth"});
}

function redirectWhatsApp() {
  const order = window.currentOrder;
  if (!order) { alert("No order generated!"); return; }

  const waMessage = `Hello Michael, I have paid for my order.
Order ID: ${order.orderID}
Service: ${order.service}
Delivery: ${order.urgency}
Total: ₦${order.total}
My Name: ${order.name}
Email: ${order.email}
WhatsApp: ${order.whatsapp}
File: ${order.fileName}`;

  const waLink = `https://wa.me/2349091156097?text=` + encodeURIComponent(waMessage);
  window.open(waLink, "_blank");
}
</script>
