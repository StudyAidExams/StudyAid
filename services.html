<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StudyAid – Student Services</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f6f8; }
.container { max-width:700px; margin:30px auto; padding:25px; background:#fff; border-radius:10px; box-shadow:0 3px 8px rgba(0,0,0,0.05);}
h1 { text-align:center; margin-bottom:20px; color:#333; }
label { display:block; margin-top:12px; font-weight:bold; }
input, textarea, select, button { width:100%; padding:10px; margin-top:5px; border-radius:5px; border:1px solid #ccc; }
textarea { resize: vertical; }
button { background:#0a7cff; color:#fff; border:none; cursor:pointer; margin-top:15px; font-weight:bold; }
button.back-btn { background:#ddd; color:#000; margin-bottom:15px; }
.preview { background:#f0f0f0; padding:15px; margin-top:20px; border-radius:6px; }
.price { font-weight:bold; font-size:18px; margin-top:5px; }
</style>
</head>
<body>

<div class="container">

<!-- Back Button -->
<button class="back-btn" onclick="window.history.back()">← Back</button>

<h1 id="pageTitle">Student Service Upload</h1>
<p><strong>Order ID:</strong> <span id="orderId"></span></p>

<!-- Customer Details -->
<label>Full Name</label>
<input type="text" id="fullname" placeholder="John Doe" required>

<label>Email Address</label>
<input type="email" id="email" placeholder="example@mail.com" required>

<label>WhatsApp Number</label>
<input type="text" id="whatsapp" placeholder="080..." required>

<label>Upload Your Question / Assignment</label>
<input type="file" id="fileUpload" accept=".pdf,.doc,.docx,.jpg,.png">

<label>Additional Instructions / Notes</label>
<textarea id="additional" rows="2" placeholder="Any clarifications, style preference or instructions"></textarea>

<label>Delivery Speed</label>
<select id="urgency" onchange="updatePreview()">
  <option value="normal">Normal (2–3 Days)</option>
  <option value="urgent">Urgent (Same Day)</option>
</select>

<!-- Order Preview -->
<div class="preview">
  <h3>Order Preview</h3>
  <p><strong>Service:</strong> <span id="pService"></span></p>
  <p><strong>Delivery:</strong> <span id="pDelivery"></span></p>
  <p class="price">Total: ₦<span id="pPrice"></span></p>
</div>

<button onclick="proceedToPayment()">Proceed to Payment</button>

</div>

<script>
// Generate Order ID
const orderId = "STU-" + new Date().toISOString().slice(0,10).replace(/-/g,"") + "-" + Math.floor(Math.random()*9000+1000);
document.getElementById("orderId").innerText = orderId;

// Detect service from URL
const params = new URLSearchParams(window.location.search);
const service = params.get('service') || "Assignment & Homework Help";
document.getElementById("pageTitle").innerText = service + " Upload";
document.getElementById("pService").innerText = service;

// Set base price
function updatePreview(){
  const urgency = document.getElementById("urgency").value;
  let price = 1500; // base
  let delivery = "2–3 Days";
  if(urgency === "urgent") { price += 1000; delivery = "Same Day"; }
  document.getElementById("pDelivery").innerText = delivery;
  document.getElementById("pPrice").innerText = price;
}
updatePreview();

// Proceed to Payment page
function proceedToPayment(){
  const fullname = document.getElementById("fullname").value.trim();
  const email = document.getElementById("email").value.trim();
  const whatsapp = document.getElementById("whatsapp").value.trim();
  const delivery = document.getElementById("pDelivery").innerText;
  const total = document.getElementById("pPrice").innerText;

  if(!fullname || !email || !whatsapp){
    alert("Please fill in all required fields!");
    return;
  }

  // Redirect to payment.html with details
  const paymentURL = `payment.html?orderID=${encodeURIComponent(orderId)}&service=${encodeURIComponent(service)}&name=${encodeURIComponent(fullname)}&email=${encodeURIComponent(email)}&whatsapp=${encodeURIComponent(whatsapp)}&urgency=${encodeURIComponent(delivery)}&total=${encodeURIComponent(total)}`;

  window.location.href = paymentURL;
}
</script>

</body>
</html>
